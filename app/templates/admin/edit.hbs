<main id="edit" role="main" class="col-md-10 ml-sm-auto">
  {{#each flashMessages.queue as |flash|}}
    {{flash-message flash=flash class="mt-3 mb-0"}}
  {{/each}}
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <heading class="mr-auto">
      <span class="badge badge-primary mr-1">Click on content to edit</span>
      {{#if (not editTitle)}}
        <h1 class="h3" {{action 'titleEdit'}}>{{model.title}} <i class="material-icons">create</i></h1>
      {{else}}
        <div class="input-group mt-2 mr-auto">
          {{input type="text" class="form-control" value=(mut model.title) aria-label="Post title"}}
        </div>
      {{/if}}
    </heading>
    <div class="saving">
      <button type="button" class="btn btn-success" name="button" {{action 'saveContent'}}>
        Save content
      </button>
      {{#if isSaving}}
        <span><i class="material-icons">autorenew</i> Saving content</span>
      {{/if}}
    </div>
  </div>
  <div class="content">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 border-bottom">
      {{#if model.category}}
        <div class="form-group row">
          <label for="category-select" class="col-sm-5 col-form-label">Category:</label>
          <div class="col-sm-7">
            <select id="category-select" class="custom-select" onchange= {{action 'saveCat' value="target.value"}}>
              <option value="need" selected="{{if (eq model.category 'need') true}}">Need</option>
              <option value="news" selected="{{if (eq model.category 'news') true}}">News</option>
              <option value="event" selected="{{if (eq model.category 'event') true}}">Event</option>
            </select>
          </div>
        </div>
      {{/if}}
      {{#if model.status}}
        <div class="form-group row">
          <label for="status-select" class="col-sm-5 col-form-label">Status:</label>
          <div class="col-sm-7">
            <select id="status-select" class="custom-select" onchange= {{action 'saveStatus' value="target.value"}}>
              <option value="draft" selected="{{if (eq model.status 'draft') true}}">Draft</option>
              <option value="published" selected="{{if (eq model.status 'published') true}}">Published</option>
            </select>
          </div>
        </div>
      {{/if}}
      {{#if model.date}}
        <div>
          Publish date: {{ember-flatpickr
            date=model.date
            dateFormat='d M y'
            onChange=(action 'saveDate')
          }}
        </div>
      {{/if}}
    </div>
    <div class="mt-2">
      {{medium-content-editable value=model.text onFinishedTyping=(action "saveContent")}}
    </div>
    {{#if model.image}}
      <div class="mt-2">
        <img src="{{model.image}}">
      </div>
    {{/if}}
    {{#if model.tags.length}}
      <div class="mt-2">
        {{#each model.tags as |tag|}}
          {{tag}}
        {{/each}}
      </div>
    {{/if}}
  </div>
</main>
